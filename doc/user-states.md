# User States

(If this file is viewed on github.com, the markdown will be rendered as a table.)

| Logged In Status (Local to App) | User Status (Server and App) | Can sync data | Can add data | How does the user get to this state                                                                                                                                                                                                                                                                     | Will access token be present? | Notification to show on Home Screen | Initial screen to show when opened | Should show lock screen |
|---------------------------------|------------------------------|---------------|--------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------|-------------------------------------|------------------------------------|-------------------------|
| OTP Requested                   | Waiting For Approval         | No            | Yes          | When they've requested a login OTP, but they haven't yet been approved for syncing in any facility group                                                                                                                                                                                                | No                            | Pending SMS verification            | Home                               | Yes                     |
| OTP Requested                   | Approved For Syncing         | No            | Yes          | When they've requested a login OTP and they have been approved for syncing in any facility group                                                                                                                                                                                                        | No                            | Pending SMS verification            | Home                               | Yes                     |
| OTP Requested                   | Disapproved For Syncing      | No            | Yes          | When they've requested a login OTP  and they have been disapproved for syncing                                                                                                                                                                                                                          | No                            | Pending SMS verification            | Home                               | Yes                     |
| Logged In                       | Waiting For Approval         | No            | Yes          | When they<br>  1. Logged in successfully, but they haven't been approved for syncing in any facility group<br> 2. Newly registered themselves                                                                                                                                                           | Yes                           | Waiting for approval                | Home                               | Yes                     |
| Logged In                       | Approved For Syncing         | Yes           | Yes          | When they logged in successfully and they have been approved for syncing in any facility group                                                                                                                                                                                                          | Yes                           |                                     | Home                               | Yes                     |
| Logged In                       | Disapproved For Syncing      | No            | Yes          | When they logged in successfully and they have been disapproved for syncing in any facility group                                                                                                                                                                                                       | Yes                           |                                     | Home                               | Yes                     |
| Resetting PIN                   | Waiting For Approval         | No            | No           | They haven't been approved for syncing in any facility group and when they begin the reset PIN flow, but don't raise the reset PIN request with the server                                                                                                                                              | Yes                           | N/A                                 | Forgot PIN - Create new PIN        | No                      |
| Resetting PIN                   | Approved For Syncing         | Yes           | No           | They have been approved for syncing in any facility group and when they begin the reset PIN flow, but don't raise the reset PIN request with the server                                                                                                                                                 | Yes                           | N/A                                 | Forgot PIN - Create new PIN        | No                      |
| Resetting PIN                   | Disapproved For Syncing      | No            | No           | They have been disapproved for syncing in a facility group and when they begin the reset PIN flow, but don't raise the reset PIN request with the server                                                                                                                                                | Yes                           | N/A                                 | Forgot PIN - Create new PIN        | No                      |
| Reset PIN Requested             | Waiting For Approval         | No            | Yes          | They haven't been approved for syncing in a facility group and when they have raised the reset PIN request with the server                                                                                                                                                                              | Yes                           | Waiting for approval                | Home                               | Yes                     |
| Reset PIN Requested             | Approved For Syncing         | No            | N/A          | The user cannot be in this state because once they raise a PIN reset request with the server, they are marked as "waiting for approval"                                                                                                                                                                 | N/A                           | N/A                                 | N/A                                | N/A                     |
| Reset PIN Requested             | Disapproved For Syncing      | No            | Yes          | They have been disapproved for syncing in a facility group and when they have raised the reset PIN request with the server                                                                                                                                                                              | Yes                           |                                     | Home                               | Yes                     |
| Unauthorized                    | Disapproved For Syncing      | No            | Yes          | When the user was disapproved for syncing and then<br> 1. They logged in on a different device<br> 2. They were moved to a different facility group on the server                                                                                                                                       | Yes                           |                                     | Home                               | Yes                     |
| Unauthorized                    | Waiting for approval         | No            | Yes          | When the user was not approved for syncing and then<br> 1. They logged in on a different device<br> 2. They were moved to a different facility group on the server                                                                                                                                      | Yes                           |                                     | Home                               | Yes                     |
| Unauthorized                    | Approved For Syncing         | No            | Yes          | When the user was approved for syncing and then<br> 1. They logged in on a different device<br> 2. They were moved to a different facility group on the server<br> 3. They were disapproved for syncing                                                                                                 | Yes                           |                                     | Home                               | Yes                     |
